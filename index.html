<!--
  Veltrax — Privacy Boundary Diagram (v2)
  One-file page. Mobile-first. Clean stacked layout so nothing clips.
  Green = local/private (Veltrax). Red = external cloud. Amber = masked PII metadata only.
  Center: Your Company (privacy boundary). Lines stay behind nodes and reflow on resize.
-->
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Veltrax — Privacy Boundary</title>
<style>
  :root{
    --vx-primary:#4c8dff; --vx-bg:#131417; --vx-surface:#1b1d23; --vx-surface-2:#20232b;
    --vx-border:#2c2f36; --vx-text:#e6e7eb; --vx-muted:#9aa1b3; --vx-good:#4cff88; --vx-danger:#ff453a; --vx-amber:#ffbb33; --vx-ring:rgba(76,141,255,.45);
  }
  *,*::before,*::after{box-sizing:border-box}
  html,body{height:100%}
  body{margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Helvetica Neue,Arial;color:var(--vx-text);background:radial-gradient(1000px 400px at 50% -200px, rgba(111,66,193,.25), transparent 60%), var(--vx-bg)}
  a{color:var(--vx-primary);text-decoration:none}
  a:hover{text-decoration:underline}
  .container{max-width:1200px;margin:0 auto;padding:0 24px}
  .hero{padding:36px 0 8px}
  .hero h1{margin:8px 0 6px;font-size:40px;line-height:1.15}
  .muted{color:var(--vx-muted)}
  .card{background:linear-gradient(180deg,var(--vx-surface),var(--vx-surface-2));border:1px solid var(--vx-border);border-radius:16px;padding:20px;box-shadow:0 1px 0 rgba(0,0,0,.25)}
  .row{display:grid;gap:16px}
  @media(min-width:900px){.row.cols-2{grid-template-columns:1fr 1fr}}
  .kpi{background:#16181f;border:1px solid var(--vx-border);border-radius:12px;padding:14px}
  .kpi .label{font-size:12px;color:var(--vx-muted);margin-bottom:6px}
  .kpi .value{font-family:ui-monospace,Menlo,Consolas,monospace;font-weight:700}
  .chip{padding:8px 12px;border-radius:10px;border:1px solid var(--vx-border);background:#161a22;white-space:nowrap}
  .chip.good{border-color:rgba(76,255,136,.55)}
  .chip.bad{border-color:rgba(255,69,58,.55)}
  .chip.dim{opacity:.45}
  .switch{display:inline-flex;align-items:center;gap:8px}
  .switch input{width:42px}

  /* Diagram */
  .diagram{position:relative;background:#0f1219;border:1px solid var(--vx-border);border-radius:16px;padding:18px;overflow:visible}
  .diagram-grid{display:grid;grid-template-columns:1fr auto 1fr;gap:18px;align-items:center}
  @media(max-width:880px){.diagram-grid{grid-template-columns:1fr;}}
  .column{display:flex;flex-direction:column;gap:12px}
  .center-col{display:flex;flex-direction:column;gap:12px;align-items:center}
  .company{padding:10px 14px;border-radius:12px;border:1px solid var(--vx-border);background:#1a1f27;text-align:center;width:240px}
  .legend{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px;font-size:12px;color:var(--vx-muted)}
  svg.wires{position:absolute;inset:0;pointer-events:none;z-index:0;overflow:visible}
  /* Keep nodes above the lines */
  .diagram-grid,.column,.center-col,.company,.chip{position:relative;z-index:1}
  footer{border-top:1px solid var(--vx-border);margin-top:36px;padding:24px 0 56px}
</style>
</head>
<body>
  <header class="container hero">
    <div style="display:flex;align-items:center;gap:10px">
      <svg width="22" height="22" viewBox="0 0 64 64" aria-hidden="true"><rect x="6" y="10" width="52" height="12" rx="6" fill="#fff"/><rect x="6" y="30" width="42" height="12" rx="6" fill="#fff"/><rect x="6" y="50" width="26" height="8" rx="4" fill="#6F42C1"/></svg>
      <span class="muted" style="letter-spacing:.2em;font-size:11px">VELTRAX</span>
    </div>
    <h1>Privacy Boundary — What Never Leaves Local Hardware</h1>
    <p class="muted">Green is local & private (Veltrax). Red is external cloud. We center your company and show clean, top‑down flows. Toggle add‑ons to see what crosses the line. PII handling changes the color and thickness of the wires.</p>
  </header>

  <main class="container row cols-2" style="align-items:start">
    <section class="card">
      <h2 style="margin:0 0 8px;font-size:16px">Boundary controls</h2>
      <div class="row" style="grid-template-columns:1fr 1fr;gap:12px">
        <label class="switch"><input type="checkbox" id="t-analytics" checked> Cloud analytics SaaS</label>
        <label class="switch"><input type="checkbox" id="t-llmapi" checked> External LLM API</label>
        <label class="switch"><input type="checkbox" id="t-enrich" checked> 3rd‑party enrichment</label>
        <label class="switch"><input type="checkbox" id="t-lake" checked> Cloud storage / data lake</label>
        <label class="switch"><input type="checkbox" id="t-monitor" checked> Monitoring / telemetry SaaS</label>
      </div>
      <div class="row" style="margin-top:10px;grid-template-columns:1fr 1fr;gap:12px">
        <label class="switch"><input type="checkbox" id="t-mask" checked> Mask or tokenize PII before export</label>
        <label class="switch"><input type="checkbox" id="t-allow"> Allow PII to leave boundary</label>
      </div>
      <div class="row" style="margin-top:12px;grid-template-columns:1fr 1fr;gap:24px">
        <div>
          <label class="muted" style="display:block;font-size:12px;margin-bottom:6px">Events per day (<span id="out-events">80,000</span>)</label>
          <input id="in-events" type="range" min="10000" max="1000000" step="1000" value="80000" />
        </div>
        <div>
          <label class="muted" style="display:block;font-size:12px;margin-bottom:6px">Outbound share of data (<span id="out-share">8%</span>)</label>
          <input id="in-share" type="range" min="0" max="50" step="1" value="8" />
        </div>
      </div>
    </section>

    <section class="card">
      <h2 style="margin:0 0 8px;font-size:16px">Risk & exposure</h2>
      <div class="row" style="grid-template-columns:repeat(4,1fr)">
        <div class="kpi"><div class="label">Vendors with live data</div><div class="value" id="k-vendors">—</div></div>
        <div class="kpi"><div class="label">PII outside boundary</div><div class="value" id="k-pii">—</div></div>
        <div class="kpi"><div class="label">Data leaving / day</div><div class="value" id="k-rows">—</div></div>
        <div class="kpi"><div class="label">Compliance risk index</div><div class="value" id="k-risk">—</div></div>
      </div>
      <div class="card" style="margin-top:12px">
        <strong style="font-size:13px">Capability contrast</strong>
        <div class="row" style="margin-top:8px;grid-template-columns:1fr 1fr">
          <div class="column" style="gap:6px">
            <span class="chip good">No API rate limits</span>
            <span class="chip good">No per‑token costs</span>
            <span class="chip good">Local LLM (zero‑egress)</span>
            <span class="chip good">Custom adapters & schema</span>
          </div>
          <div class="column" style="gap:6px">
            <span class="chip bad">Rate‑limited APIs</span>
            <span class="chip bad">Per‑tokenized pricing</span>
            <span class="chip bad">Generic models</span>
            <span class="chip bad">Shared multi‑tenant infra</span>
          </div>
        </div>
      </div>
    </section>
  </main>

  <section class="container card" style="margin-top:20px">
    <h2 style="margin:0 0 8px;font-size:16px">Privacy boundary diagram</h2>
    <div id="diagram" class="diagram">
      <svg id="wires" class="wires" role="img" aria-label="data flow wires"></svg>
      <div class="diagram-grid">
        <!-- Left: Veltrax / local -->
        <div class="column" id="left-col">
          <div class="chip good" id="local-core">Core / Loans / Cards / CRM<br><small class="muted">No API limits · No per‑token cost</small></div>
          <div class="chip good" id="local-llm">Local LLM (RAG, zero‑egress)</div>
          <div class="chip good" id="local-store">Local datastore & audit log<br><small class="muted">Custom to your business</small></div>
        </div>
        <!-- Center: Company -->
        <div class="center-col">
          <div class="company" id="company">
            <div style="font-weight:700">Your Company</div>
            <div class="muted" style="font-size:12px">Privacy boundary</div>
          </div>
        </div>
        <!-- Right: Cloud vendors -->
        <div class="column" id="right-col">
          <div class="chip bad" id="cloud-analytics">Analytics SaaS<br><small class="muted">rate‑limited</small></div>
          <div class="chip bad" id="cloud-llm">LLM API<br><small class="muted">per‑token</small></div>
          <div class="chip bad" id="cloud-enrich">3rd‑party enrichment<br><small class="muted">generic</small></div>
          <div class="chip bad" id="cloud-lake">Cloud storage / lake</div>
          <div class="chip bad" id="cloud-monitor">Monitoring SaaS</div>
        </div>
      </div>
      <div class="legend">
        <span class="chip">Local / Private (Veltrax)</span>
        <span class="chip">External cloud</span>
        <span class="chip">PII allowed ⇒ red & thicker · Masked ⇒ amber · Metadata only ⇒ thin green</span>
      </div>
    </div>
  </section>

  <footer>
    <div class="container" style="display:flex;justify-content:space-between;gap:16px;flex-wrap:wrap">
      <div style="display:flex;align-items:center;gap:10px">
        <svg width="22" height="22" viewBox="0 0 64 64" aria-hidden="true"><rect x="6" y="10" width="52" height="12" rx="6" fill="#fff"/><rect x="6" y="30" width="42" height="12" rx="6" fill="#fff"/><rect x="6" y="50" width="26" height="8" rx="4" fill="#6F42C1"/></svg>
        <span class="muted" style="letter-spacing:.2em;font-size:11px">VELTRAX</span>
      </div>
      <div class="muted">Local‑first. Private by default. Built for operators who need provable ROI.</div>
    </div>
  </footer>

<script>
  const $ = s=>document.querySelector(s);
  const $$ = s=>Array.from(document.querySelectorAll(s));
  const fmt = n=>n.toLocaleString();
  const NS = 'http://www.w3.org/2000/svg';

  function edgeAnchor(el, root, edge='right', t=0.5){
    const eb = el.getBoundingClientRect();
    const rb = root.getBoundingClientRect();
    const x0 = eb.left - rb.left;
    const y0 = eb.top - rb.top;
    if(edge==='left') return {x:x0, y:y0 + eb.height*t};
    if(edge==='right') return {x:x0 + eb.width, y:y0 + eb.height*t};
    if(edge==='top') return {x:x0 + eb.width*t, y:y0};
    if(edge==='bottom') return {x:x0 + eb.width*t, y:y0 + eb.height};
    return {x:x0 + eb.width*0.5, y:y0 + eb.height*0.5};
  }
  function drawPath(svg,a,b,color,width,curv=60){
    const p=document.createElementNS(NS,'path');
    const d=`M ${a.x} ${a.y} C ${a.x+curv} ${a.y}, ${b.x-curv} ${b.y}, ${b.x} ${b.y}`;
    p.setAttribute('d',d);
    p.setAttribute('fill','none');
    p.setAttribute('stroke',color); p.setAttribute('stroke-width',width);
    p.setAttribute('stroke-linecap','round'); p.setAttribute('vector-effect','non-scaling-stroke');
    svg.appendChild(p);
  }
  function clearSvg(svg){while(svg.firstChild) svg.removeChild(svg.firstChild)}

  function riskScore(){
    const vendors = ['t-analytics','t-llmapi','t-enrich','t-lake','t-monitor'].filter(id=>$('#'+id).checked).length;
    const allow = $('#t-allow').checked; const mask = $('#t-mask').checked; const share = parseInt($('#in-share').value);
    let score = 10 + vendors*5 + (share>0?5:0);
    if(allow) score += 25; else if(mask && share>0) score += 8;
    if($('#t-llmapi').checked) score += allow?10:4;
    return Math.min(100, score);
  }

  function updateKpis(){
    const vendors = ['t-analytics','t-llmapi','t-enrich','t-lake','t-monitor'].filter(id=>$('#'+id).checked).length;
    const allow = $('#t-allow').checked; const mask = $('#t-mask').checked; const share = parseInt($('#in-share').value);
    const events = parseInt($('#in-events').value);
    $('#k-vendors').textContent = vendors;
    $('#k-pii').textContent = allow ? 'Yes' : (share>0 ? (mask? 'Masked':'No (metadata)') : 'No');
    $('#k-rows').textContent = `${fmt(Math.round(events*share/100))} rows`;
    $('#k-risk').textContent = riskScore();
  }

  function drawWires(){
    const stage = $('#diagram');
    const svg = $('#wires');
    clearSvg(svg);
    svg.setAttribute('viewBox', `0 0 ${stage.clientWidth} ${stage.clientHeight}`);

    // Elements
    const company = $('#company');
    const left = ['#local-core','#local-llm','#local-store'].map(sel=>$(sel));
    const right = [
      ['#cloud-analytics','#t-analytics'],
      ['#cloud-llm','#t-llmapi'],
      ['#cloud-enrich','#t-enrich'],
      ['#cloud-lake','#t-lake'],
      ['#cloud-monitor','#t-monitor']
    ];

    // Styles based on PII rules
    const allow = $('#t-allow').checked; const mask = $('#t-mask').checked; const share = parseInt($('#in-share').value);
    const colorOut = allow ? getCSS('--vx-danger') : (share>0 && mask ? getCSS('--vx-amber') : getCSS('--vx-good'));
    const widthOut = allow ? 4.5 : (share>0 && mask ? 3 : 2.2);
    const colorIn = getCSS('--vx-good');

    // Left → Company (always green)
    left.forEach((el,i)=>{
      drawPath(svg, edgeAnchor(el, stage, 'right', 0.6), edgeAnchor(company, stage, 'left', 0.3 + i*0.35/left.length), colorIn, 3, 50);
    });

    // Company → Cloud (respect toggles)
    right.forEach(([sel,toggle],i)=>{
      const node = $(sel); const on = $(toggle).checked;
      node.classList.toggle('dim', !on);
      if(!on) return;
      drawPath(svg, edgeAnchor(company, stage, 'right', 0.25 + i*0.15), edgeAnchor(node, stage, 'left', 0.5), colorOut, widthOut, 70);
    });
  }

  function getCSS(varName){return getComputedStyle(document.documentElement).getPropertyValue(varName).trim()}

  function bind(){
    // Sliders → text
    $('#in-events').addEventListener('input', e=>{ $('#out-events').textContent = fmt(parseInt(e.target.value)); updateKpis(); drawWires(); });
    $('#in-share').addEventListener('input', e=>{ $('#out-share').textContent = e.target.value + '%'; updateKpis(); drawWires(); });
    // Toggles
    $$('#t-analytics, #t-llmapi, #t-enrich, #t-lake, #t-monitor, #t-mask, #t-allow').forEach(el=>{
      el.addEventListener('change', ()=>{ updateKpis(); drawWires(); });
    });
    // Resize
    window.addEventListener('resize', ()=>{ drawWires(); });
  }

  function init(){
    bind(); updateKpis(); drawWires();
  }
  document.addEventListener('DOMContentLoaded', init);
</script>
</body>
</html>
