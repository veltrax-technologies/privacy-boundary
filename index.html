<!--
  Veltrax — Privacy Boundary Diagram (Simulator #2)
  Goal: Show what never leaves local hardware. Green = local/private, Red = external cloud.
  Adds clear contrast: Veltrax has **no API limits**, **no per‑token costs**, **local LLM (zero egress)**, and **custom adapters**.
  Cloud add‑ons are optional and limited (rate‑limited, per‑token, generic models).
  Toggle add‑ons to see wires cross the boundary; PII options change color/thickness and risk index.
  Single file, no deps, responsive.
-->

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Veltrax — Privacy Boundary</title>
    <style>
      :root{
        --vx-primary:#4c8dff; --vx-bg:#131417; --vx-surface:#1b1d23; --vx-surface-2:#20232b;
        --vx-border:#2c2f36; --vx-text:#e6e7eb; --vx-muted:#9aa1b3; --vx-good:#4cff88; --vx-danger:#ff453a; --vx-warn:#ffb020; --vx-ring:rgba(76,141,255,.45);
      }
      *,*::before,*::after{box-sizing:border-box}
      html,body{height:100%}
      body{margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,"Helvetica Neue",Arial;color:var(--vx-text);background:radial-gradient(1000px 400px at 50% -200px, rgba(111,66,193,.25), transparent 60%), var(--vx-bg)}
      a{color:var(--vx-primary);text-decoration:none}
      a:hover{text-decoration:underline}
      .container{max-width:1280px;margin:0 auto;padding:0 24px}
      .card{background:linear-gradient(180deg,var(--vx-surface),var(--vx-surface-2));border:1px solid var(--vx-border);border-radius:16px;padding:18px;box-shadow:0 1px 0 rgba(0,0,0,.25)}
      .muted{color:var(--vx-muted)}
      .hero{padding:36px 0 10px}
      .hero h1{margin:8px 0 6px;font-size:40px;line-height:1.15}
      .grid{display:grid;gap:16px}
      @media (min-width:960px){.grid.cols-2{grid-template-columns:1.2fr .8fr}}
      .kpi{background:#16181f;border:1px solid var(--vx-border);border-radius:12px;padding:12px}
      .kpi .label{font-size:12px;color:var(--vx-muted)}
      .kpi .value{font-size:22px;font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,monospace}
      .toggle{display:flex;align-items:center;gap:10px}
      .switch{position:relative;width:44px;height:24px;background:#0f1219;border:1px solid var(--vx-border);border-radius:999px;cursor:pointer}
      .switch input{opacity:0;width:0;height:0}
      .knob{position:absolute;top:2px;left:2px;width:18px;height:18px;border-radius:50%;background:#646a78;transition:transform .15s ease,background .15s ease}
      .switch input:checked + .knob{transform:translateX(20px);background:var(--vx-primary)}

      /* Diagram */
      .stage{position:relative;border:1px solid var(--vx-border);border-radius:16px;background:linear-gradient(90deg,#162017,#0f1219 49%,#220e10 51%,#15161d);padding:20px;height:520px;overflow:visible}
      .stage svg{position:absolute;inset:0;z-index:0;pointer-events:none}
      .stage .content{position:relative;z-index:1;height:100%}
      .col{position:absolute;top:16px;bottom:64px;width:50%}
      .left{left:16px}
      .right{right:16px}
      .center{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%)}
      .node{padding:8px 12px;border-radius:10px;border:1px solid var(--vx-border);background:#161a22;white-space:nowrap}
      .node.good{border-color:rgba(76,255,136,.6)}
      .node.bad{border-color:rgba(255,69,58,.6)}
      .node.note{font-size:12px;color:var(--vx-muted);background:#11141b}
      .row{display:flex;flex-wrap:wrap;gap:10px}
      .badge{display:inline-flex;align-items:center;gap:6px;border:1px solid var(--vx-border);background:#11141a;color:var(--vx-muted);border-radius:999px;padding:4px 8px;font-size:11px}
      .badge.good{color:#b8ffcf;border-color:rgba(76,255,136,.5)}
      .badge.bad{color:#ffb4ac;border-color:rgba(255,69,58,.5)}
      .legend{position:absolute;bottom:12px;left:16px;display:flex;gap:10px;flex-wrap:wrap;color:var(--vx-muted);font-size:12px}
      .divider{position:absolute;top:12px;bottom:48px;left:50%;width:0;border-left:2px dashed #3a3e49}

      footer{border-top:1px solid var(--vx-border);margin-top:32px;padding:24px 0 48px}
    </style>
  </head>
  <body>
    <header class="container hero">
      <div style="display:flex;align-items:center;gap:10px">
        <svg width="22" height="22" viewBox="0 0 64 64" aria-hidden="true"><rect x="6" y="10" width="52" height="12" rx="6" fill="#fff"/><rect x="6" y="30" width="42" height="12" rx="6" fill="#fff"/><rect x="6" y="50" width="26" height="8" rx="4" fill="#6F42C1"/></svg>
        <span class="muted" style="letter-spacing:.2em;font-size:11px">VELTRAX</span>
      </div>
      <h1>Privacy Boundary — What Never Leaves Local Hardware</h1>
      <p class="muted" style="max-width:900px">Green is local & private. Red is external cloud. Toggle add‑ons to see what crosses the line and how risk changes. PII handling controls affect the color and thickness of the wires. Left side highlights Veltrax advantages; right side shows typical cloud limitations.</p>
    </header>

    <main class="container grid cols-2">
      <section class="card" aria-labelledby="controls">
        <h2 id="controls" style="margin:0 0 6px;font-size:18px">Boundary controls</h2>
        <div class="grid" style="grid-template-columns:1fr 1fr;gap:12px">
          <div class="toggle"><label class="switch"><input id="t-analytics" type="checkbox" checked /><span class="knob"></span></label><span>Cloud analytics SaaS</span></div>
          <div class="toggle"><label class="switch"><input id="t-llm" type="checkbox" /><span class="knob"></span></label><span>External LLM API</span></div>
          <div class="toggle"><label class="switch"><input id="t-enrich" type="checkbox" /><span class="knob"></span></label><span>3rd‑party enrichment</span></div>
          <div class="toggle"><label class="switch"><input id="t-lake" type="checkbox" /><span class="knob"></span></label><span>Cloud storage / data lake</span></div>
          <div class="toggle"><label class="switch"><input id="t-monitor" type="checkbox" /><span class="knob"></span></label><span>Monitoring / telemetry SaaS</span></div>
        </div>
        <hr style="border:none;border-top:1px solid var(--vx-border);margin:12px 0"/>
        <div class="grid" style="grid-template-columns:1fr 1fr;gap:12px">
          <div class="toggle"><label class="switch"><input id="t-mask" type="checkbox" checked /><span class="knob"></span></label><span>Mask or tokenize PII before export</span></div>
          <div class="toggle"><label class="switch"><input id="t-allow" type="checkbox" /><span class="knob"></span></label><span>Allow PII to leave boundary</span></div>
        </div>
        <div style="margin-top:12px">
          <label class="muted" style="font-size:12px">Events per day <span id="out-events" style="font-family:ui-monospace">1,000,000</span></label>
          <input id="in-events" type="range" min="50000" max="2000000" step="10000" value="1000000"/>
        </div>
        <div style="margin-top:8px">
          <label class="muted" style="font-size:12px">Outbound share of data (%) <span id="out-share" style="font-family:ui-monospace">8%</span></label>
          <input id="in-share" type="range" min="0" max="40" step="1" value="8"/>
        </div>
        <p class="muted" style="font-size:12px;margin-top:10px">Toggles are off by default. Enable only what you truly need in the cloud.</p>
      </section>

      <section class="card" aria-labelledby="risk">
        <h2 id="risk" style="margin:0 0 6px;font-size:18px">Risk & exposure</h2>
        <div class="grid" style="grid-template-columns:repeat(2,1fr);gap:10px">
          <div class="kpi"><div class="label">Vendors with live data</div><div id="k-vendors" class="value">0</div></div>
          <div class="kpi"><div class="label">PII outside boundary</div><div id="k-pii" class="value">No</div></div>
          <div class="kpi"><div class="label">Data leaving / day</div><div id="k-rows" class="value">0 rows</div></div>
          <div class="kpi"><div class="label">Compliance risk index</div><div id="k-risk" class="value">0</div></div>
        </div>
        <div class="card" style="margin-top:12px">
          <strong style="font-size:13px">Capability contrast</strong>
          <div class="grid" style="grid-template-columns:1fr 1fr;gap:8px;margin-top:8px">
            <div>
              <div class="badge good">No API rate limits</div>
              <div class="badge good">No per‑token costs</div>
              <div class="badge good">Local LLM (zero egress)</div>
              <div class="badge good">Custom adapters & schema</div>
            </div>
            <div>
              <div class="badge bad">Rate‑limited APIs</div>
              <div class="badge bad">Per‑token/seat pricing</div>
              <div class="badge bad">Generic models</div>
              <div class="badge bad">Shared multi‑tenant infra</div>
            </div>
          </div>
        </div>
      </section>
    </main>

    <section class="container card" style="margin-top:16px">
      <h2 style="margin:0 0 8px;font-size:18px">Privacy boundary diagram</h2>
      <div class="stage" id="stage">
        <svg id="wires" aria-hidden="true"></svg>
        <div class="content">
          <div class="divider" aria-hidden="true"></div>
          <div class="col left">
            <div class="row" style="margin-bottom:10px">
              <div class="node good" id="src-core">Core / Loans / Cards / CRM</div>
              <div class="node good" id="src-store">Local datastore & audit log</div>
            </div>
            <div class="row" style="margin-bottom:10px">
              <div class="badge good">No API limits</div>
              <div class="badge good">No per‑token cost</div>
              <div class="badge good">Custom to your business</div>
            </div>
            <div class="row">
              <div class="node good" id="src-llm-local">Local LLM (RAG, zero‑egress)</div>
            </div>
          </div>

          <div class="center">
            <div class="row" style="align-items:center;gap:10px">
              <div style="width:18px;height:18px;background:var(--vx-good);border-radius:50%;box-shadow:0 0 0 6px rgba(76,255,136,.15)"></div>
              <div class="node good" id="veltrax" style="width:220px;text-align:center">Veltrax node (local model)</div>
            </div>
          </div>

          <div class="col right">
            <div class="row" style="margin-bottom:10px">
              <div class="node bad" id="n-analytics">Analytics SaaS <span class="badge bad" style="margin-left:6px">rate‑limited</span></div>
              <div class="node bad" id="n-llm">LLM API <span class="badge bad" style="margin-left:6px">per‑token</span></div>
            </div>
            <div class="row" style="margin-bottom:10px">
              <div class="node bad" id="n-enrich">3rd‑party enrichment <span class="badge bad" style="margin-left:6px">generic</span></div>
              <div class="node bad" id="n-lake">Cloud storage / lake</div>
            </div>
            <div class="row">
              <div class="node bad" id="n-monitor">Monitoring SaaS</div>
            </div>
          </div>

          <div class="legend">
            <span class="badge good">Local / Private (Veltrax)</span>
            <span class="badge bad">External cloud</span>
            <span class="badge" id="legend-wire">Wire color mirrors PII policy</span>
          </div>
        </div>
      </div>
      <p class="muted" style="margin-top:8px;font-size:12px">Green zone stays on your hardware. Red zone is optional and increases risk and egress. Wires turn <span style="color:var(--vx-danger)">red</span> and thicker if PII is allowed to leave; they are <span style="color:var(--vx-warn)">amber</span> when masked; <span style="color:var(--vx-good)">green</span> when only metadata leaves.</p>
    </section>

    <footer>
      <div class="container" style="display:flex;justify-content:space-between;gap:16px;flex-wrap:wrap">
        <div style="display:flex;align-items:center;gap:10px">
          <svg width="22" height="22" viewBox="0 0 64 64" aria-hidden="true"><rect x="6" y="10" width="52" height="12" rx="6" fill="#fff"/><rect x="6" y="30" width="42" height="12" rx="6" fill="#fff"/><rect x="6" y="50" width="26" height="8" rx="4" fill="#6F42C1"/></svg>
          <span class="muted" style="letter-spacing:.2em;font-size:11px">VELTRAX</span>
        </div>
        <div class="muted">Local‑first. Private by default. Built for operators who need provable ROI.</div>
      </div>
    </footer>

    <script>
      const $ = s=>document.querySelector(s);
      const $$ = s=>Array.from(document.querySelectorAll(s));
      const NS = 'http://www.w3.org/2000/svg';
      const money = n=>n.toLocaleString();

      const toggles = ['t-analytics','t-llm','t-enrich','t-lake','t-monitor'];

      function draw(){
        const svg = $('#wires');
        while(svg.firstChild) svg.removeChild(svg.firstChild);
        const stage = $('#stage');
        svg.setAttribute('viewBox',`0 0 ${stage.clientWidth} ${stage.clientHeight}`);
        svg.setAttribute('width',stage.clientWidth);
        svg.setAttribute('height',stage.clientHeight);

        const allowPII = $('#t-allow').checked;
        const masked = $('#t-mask').checked && !allowPII;
        const color = allowPII ? getVar('--vx-danger') : (masked ? getVar('--vx-warn') : getVar('--vx-good'));
        const width = allowPII ? 5 : (masked ? 3.5 : 2.5);
        $('#legend-wire').textContent = allowPII ? 'PII allowed → red / thick wires' : (masked ? 'Masked data → amber wires' : 'Metadata only → green wires');

        // helper to anchor to element edge
        const anchor = (el, edge='right', t=.5)=>{
          const eb = el.getBoundingClientRect();
          const rb = stage.getBoundingClientRect();
          const x0 = eb.left - rb.left;
          const y0 = eb.top - rb.top;
          if(edge==='left') return {x:x0,y:y0 + eb.height*t};
          if(edge==='right')return {x:x0 + eb.width,y:y0 + eb.height*t};
          if(edge==='top')  return {x:x0 + eb.width*t,y:y0};
          return {x:x0 + eb.width*t,y:y0 + eb.height};
        };
        const path = (a,b)=>{
          const p = document.createElementNS(NS,'path');
          const d = `M ${a.x} ${a.y} C ${a.x+80} ${a.y}, ${b.x-80} ${b.y}, ${b.x} ${b.y}`;
          p.setAttribute('d',d); p.setAttribute('fill','none'); p.setAttribute('stroke',color); p.setAttribute('stroke-width',width); p.setAttribute('stroke-linecap','round'); p.setAttribute('vector-effect','non-scaling-stroke');
          svg.appendChild(p);
        };

        // left sources → Veltrax (always green thin)
        const leftColor = getVar('--vx-good');
        const leftW = 2.5;
        const p2 = (a,b)=>{ const p=document.createElementNS(NS,'path'); const d=`M ${a.x} ${a.y} C ${a.x+60} ${a.y}, ${b.x-60} ${b.y}, ${b.x} ${b.y}`; p.setAttribute('d',d); p.setAttribute('fill','none'); p.setAttribute('stroke',leftColor); p.setAttribute('stroke-width',leftW); p.setAttribute('stroke-linecap','round'); p.setAttribute('vector-effect','non-scaling-stroke'); svg.appendChild(p); };
        [['#src-core','top',.7],['#src-store','right',.5],['#src-llm-local','right',.5]].forEach(([sel,edge,t])=>{
          p2(anchor($(sel),edge,t), anchor($('#veltrax'),'left',.5));
        });

        // Veltrax → enabled cloud add‑ons
        const map = [
          ['#t-analytics','#n-analytics'],
          ['#t-llm','#n-llm'],
          ['#t-enrich','#n-enrich'],
          ['#t-lake','#n-lake'],
          ['#t-monitor','#n-monitor']
        ];
        map.forEach(([tSel,nodeSel],i)=>{
          if($(tSel).checked){ path(anchor($('#veltrax'),'right',.5), anchor($(nodeSel),'left',.5)); }
        });

        updateRisk();
      }

      function updateRisk(){
        const vendors = toggles.map(id=>$('#'+id).checked?1:0).reduce((a,b)=>a+b,0);
        const allowPII = $('#t-allow').checked;
        const masked = $('#t-mask').checked && !allowPII;
        const events = parseInt($('#in-events').value);
        const share = parseInt($('#in-share').value) / 100;
        const rows = vendors>0 ? Math.round(events * share) : 0;
        const llmExternal = $('#t-llm').checked?1:0;

        // risk model (illustrative): vendor count + llm + pii + volume factor
        let risk = vendors*12 + llmExternal*18 + (allowPII?28: (masked?10:4));
        risk = Math.min(100, Math.round(risk * (0.5 + share)));

        $('#k-vendors').textContent = vendors;
        $('#k-pii').textContent = allowPII ? 'Yes' : (masked ? 'Masked' : 'No');
        $('#k-rows').textContent = vendors>0 ? `${rows.toLocaleString()} rows` : '0 rows';
        $('#k-risk').textContent = risk;
      }

      function getVar(name){ return getComputedStyle(document.documentElement).getPropertyValue(name).trim(); }

      function bind(){
        // switches & sliders
        [...toggles.map(id=>$('#'+id)), $('#t-mask'), $('#t-allow')].forEach(el=> el.addEventListener('change', draw));
        ['in-events','in-share'].forEach(id=> $('#'+id).addEventListener('input', e=>{ if(id==='in-events') $('#out-events').textContent = parseInt(e.target.value).toLocaleString(); if(id==='in-share') $('#out-share').textContent = e.target.value + '%'; draw(); }));
        // draw on resize
        window.addEventListener('resize', draw);
      }

      // init
      bind();
      draw();
    </script>
  </body>
</html>
