<!--
  Veltrax — Privacy Boundary Diagram (v3)
  Fixes: stacked columns, clean connections, lines behind nodes, mobile-first.
  Single-file; copy-paste into GitHub Pages.
-->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Veltrax — Privacy Boundary</title>
    <style>
      :root{
        --vx-primary:#4c8dff; --vx-bg:#131417; --vx-surface:#1b1d23; --vx-surface-2:#20232b;
        --vx-border:#2c2f36; --vx-text:#e6e7eb; --vx-muted:#9aa1b3; --vx-good:#4cff88; --vx-danger:#ff453a; --vx-amber:#ffb020; --vx-ring:rgba(76,141,255,.45);
      }
      *,*::before,*::after{box-sizing:border-box}
      html,body{height:100%}
      body{margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,"Helvetica Neue",Arial;color:var(--vx-text);background:radial-gradient(1000px 400px at 50% -200px, rgba(111,66,193,.25), transparent 60%), var(--vx-bg)}
      .container{max-width:1200px;margin:0 auto;padding:0 24px}
      .hero{padding:36px 0 10px}
      .hero h1{margin:8px 0 6px;font-size:38px;line-height:1.15}
      .muted{color:var(--vx-muted)}
      .card{background:linear-gradient(180deg,var(--vx-surface),var(--vx-surface-2));border:1px solid var(--vx-border);border-radius:16px;padding:20px;box-shadow:0 1px 0 rgba(0,0,0,.25)}
      .row{display:grid;gap:16px}
      @media(min-width:1000px){.row.cols-2{grid-template-columns:1fr 1fr}}
      .switch{position:relative;display:inline-flex;align-items:center;gap:8px}
      .switch input{appearance:none;width:44px;height:26px;border-radius:999px;background:#1a1e27;border:1px solid var(--vx-border);position:relative;outline:none;cursor:pointer;box-shadow:0 0 0 0 var(--vx-ring);transition:120ms}
      .switch input:checked{background:rgba(76,141,255,.18);border-color:var(--vx-primary);box-shadow:0 0 0 3px var(--vx-ring)}
      .switch input::after{content:"";position:absolute;top:2px;left:2px;width:20px;height:20px;border-radius:50%;background:#cfd2da;transition:transform .18s}
      .switch input:checked::after{transform:translateX(18px)}
      .kpi{background:#16181f;border:1px solid var(--vx-border);border-radius:12px;padding:12px}
      .kpi h4{margin:0 0 6px;font-size:12px;color:var(--vx-muted)}
      .kpi .v{font-family:ui-monospace,Menlo,Consolas,monospace;font-size:18px}

      /* Diagram */
      .stage{position:relative;background:#0f1219;border:1px solid var(--vx-border);border-radius:16px;min-height:520px;overflow:visible}
      .legend{display:flex;gap:10px;position:absolute;bottom:12px;left:12px;font-size:12px;color:var(--vx-muted);flex-wrap:wrap}
      .cols{position:absolute;inset:20px 20px 24px 20px;display:grid;gap:16px}
      @media(min-width:900px){.cols{grid-template-columns:1fr 360px 1fr}}
      @media(max-width:899px){.cols{grid-template-columns:1fr;}}
      .stack{display:flex;flex-direction:column;gap:12px}
      .node{padding:10px 12px;border-radius:12px;border:1px solid var(--vx-border);background:#161a22;white-space:nowrap;box-shadow:0 1px 0 rgba(0,0,0,.2)}
      .node.good{border-color:rgba(76,255,136,.45)}
      .node.bad{border-color:rgba(255,69,58,.55)}
      .company{display:flex;flex-direction:column;gap:12px;align-items:center;justify-content:center}
      .company .badge{font-size:12px;color:var(--vx-muted)}
      .company .node{width:280px;text-align:center}
      .cap-contrast{display:flex;gap:8px;flex-wrap:wrap}
      .cap{font-size:11px;border:1px solid var(--vx-border);padding:6px 8px;border-radius:999px;background:#141821}
      .cap.good{border-color:rgba(76,255,136,.4)}
      .cap.bad{border-color:rgba(255,69,58,.5)}

      /* keep nodes above the lines */
      .cols, .node, .company{position:relative;z-index:1}
      svg.wires{position:absolute;inset:0;z-index:0;pointer-events:none;overflow:visible}
      footer{border-top:1px solid var(--vx-border);margin-top:36px;padding:24px 0 48px}
    </style>
  </head>
  <body>
    <header class="container hero">
      <div style="display:flex;align-items:center;gap:10px">
        <svg width="22" height="22" viewBox="0 0 64 64" aria-hidden="true"><rect x="6" y="10" width="52" height="12" rx="6" fill="#fff"/><rect x="6" y="30" width="42" height="12" rx="6" fill="#fff"/><rect x="6" y="50" width="26" height="8" rx="4" fill="#6F42C1"/></svg>
        <span class="muted" style="letter-spacing:.2em;font-size:11px">VELTRAX</span>
      </div>
      <h1>Privacy Boundary — What Never Leaves Local Hardware</h1>
      <p class="muted" style="max-width:900px">Green is local & private (Veltrax). Red is external cloud. We center your company and show clean, top‑down flows. Toggle add‑ons to see what crosses the line. PII handling changes the color and thickness of the wires.</p>
    </header>

    <main class="container row cols-2">
      <section class="card">
        <h3 style="margin:0 0 10px">Boundary controls</h3>
        <div class="row" style="grid-template-columns:1fr 1fr">
          <label class="switch"><input id="t-analytics" type="checkbox" checked><span>Cloud analytics SaaS</span></label>
          <label class="switch"><input id="t-llmapi" type="checkbox" checked><span>External LLM API</span></label>
          <label class="switch"><input id="t-enrich" type="checkbox" checked><span>3rd‑party enrichment</span></label>
          <label class="switch"><input id="t-lake" type="checkbox" checked><span>Cloud storage / data lake</span></label>
          <label class="switch"><input id="t-mon" type="checkbox" checked><span>Monitoring / telemetry SaaS</span></label>
        </div>
        <hr style="border:none;border-top:1px solid var(--vx-border);margin:14px 0">
        <div class="row" style="grid-template-columns:1fr 1fr">
          <label class="switch"><input id="t-mask" type="checkbox" checked><span>Mask or tokenize PII before export</span></label>
          <label class="switch"><input id="t-allow" type="checkbox"><span>Allow PII to leave boundary</span></label>
        </div>
        <div class="row" style="grid-template-columns:1fr 1fr;margin-top:12px">
          <div class="kpi"><h4>Events per day</h4><div class="v" id="k-events">80,000</div><input id="in-events" type="range" min="10000" max="1000000" step="10000" value="80000"></div>
          <div class="kpi"><h4>Outbound share of data</h4><div class="v" id="k-share">8%</div><input id="in-share" type="range" min="0" max="50" step="1" value="8"></div>
        </div>
      </section>

      <section class="card">
        <h3 style="margin:0 0 10px">Risk & exposure</h3>
        <div class="row" style="grid-template-columns:repeat(4,1fr)">
          <div class="kpi"><h4>Vendors with live data</h4><div class="v" id="k-vendors">5</div></div>
          <div class="kpi"><h4>PII outside boundary</h4><div class="v" id="k-pii">Masked</div></div>
          <div class="kpi"><h4>Data leaving / day</h4><div class="v" id="k-leaving">6,400 rows</div></div>
          <div class="kpi"><h4>Compliance risk index</h4><div class="v" id="k-risk">37</div></div>
        </div>
        <div class="kpi" style="margin-top:12px">
          <h4>Capability contrast</h4>
          <div class="cap-contrast">
            <span class="cap good">No API rate limits</span>
            <span class="cap good">No per‑token costs</span>
            <span class="cap good">Local LLM (zero‑egress)</span>
            <span class="cap good">Custom adapters & schema</span>
            <span class="cap bad">Rate‑limited APIs</span>
            <span class="cap bad">Per‑tokenized pricing</span>
            <span class="cap bad">Generic models</span>
            <span class="cap bad">Shared multi‑tenant infra</span>
          </div>
        </div>
      </section>
    </main>

    <section class="container card" style="margin-top:20px">
      <h3 style="margin:0 0 10px">Privacy boundary diagram</h3>
      <div class="stage" id="stage">
        <!-- wiring svg sits behind everything -->
        <svg class="wires" id="wires" role="img" aria-label="Privacy boundary flows"></svg>

        <!-- three stacked columns (left → center → right); become vertical on mobile -->
        <div class="cols">
          <!-- Left: Veltrax (green) -->
          <div class="stack" id="col-left">
            <div class="node good" id="vx-core">Core / Loans / Cards / CRM<br><small class="muted">No API limits · No per‑token cost</small></div>
            <div class="node good" id="vx-llm">Local LLM (RAG, zero‑egress)</div>
            <div class="node good" id="vx-store">Local datastore & audit log<br><small class="muted">Custom to your business</small></div>
          </div>

          <!-- Center: Company boundary -->
          <div class="company" id="col-center">
            <div class="node" id="company">Your Company<br><span class="badge">Privacy boundary</span></div>
          </div>

          <!-- Right: Cloud (red) -->
          <div class="stack" id="col-right">
            <div class="node bad" id="c-analytics">Analytics SaaS<br><small class="muted">rate‑limited</small></div>
            <div class="node bad" id="c-llmapi">LLM API<br><small class="muted">per‑token</small></div>
            <div class="node bad" id="c-enrich">3rd‑party enrichment<br><small class="muted">generic</small></div>
            <div class="node bad" id="c-lake">Cloud storage / lake</div>
            <div class="node bad" id="c-mon">Monitoring SaaS</div>
          </div>
        </div>

        <div class="legend"><span class="node good" style="padding:6px 10px">Local / Private (Veltrax)</span><span class="node bad" style="padding:6px 10px">External cloud</span><span class="muted">PII allowed = red & thicker · Masked = amber · Metadata only = thin green</span></div>
      </div>
    </section>

    <footer>
      <div class="container" style="display:flex;justify-content:space-between;gap:16px;flex-wrap:wrap">
        <div style="display:flex;align-items:center;gap:10px">
          <svg width="22" height="22" viewBox="0 0 64 64" aria-hidden="true"><rect x="6" y="10" width="52" height="12" rx="6" fill="#fff"/><rect x="6" y="30" width="42" height="12" rx="6" fill="#fff"/><rect x="6" y="50" width="26" height="8" rx="4" fill="#6F42C1"/></svg>
          <span class="muted" style="letter-spacing:.2em;font-size:11px">VELTRAX</span>
        </div>
        <div class="muted">Local‑first. Private by default. Built for operators who need provable ROI.</div>
      </div>
    </footer>

    <script>
      // Simple helpers
      const $ = s=>document.querySelector(s);
      const $$ = s=>Array.from(document.querySelectorAll(s));
      const NS = 'http://www.w3.org/2000/svg';

      // Anchor utilities (edge positions relative to root)
      function anchor(el, root, which='center'){
        const eb = el.getBoundingClientRect();
        const rb = root.getBoundingClientRect();
        const cx = eb.left - rb.left + eb.width/2;
        const cy = eb.top  - rb.top  + eb.height/2;
        if(which==='left')   return {x: eb.left - rb.left, y: cy};
        if(which==='right')  return {x: eb.right- rb.left, y: cy};
        if(which==='top')    return {x: cx, y: eb.top - rb.top};
        if(which==='bottom') return {x: cx, y: eb.bottom - rb.top};
        return {x: cx, y: cy};
      }
      function pathC(a,b,curv=64){
        return `M ${a.x} ${a.y} C ${a.x+curv} ${a.y}, ${b.x-curv} ${b.y}, ${b.x} ${b.y}`;
      }
      function drawWire(svg, a, b, color, width){
        const p = document.createElementNS(NS,'path');
        p.setAttribute('d', pathC(a,b));
        p.setAttribute('fill','none');
        p.setAttribute('stroke',color);
        p.setAttribute('stroke-width',width);
        p.setAttribute('stroke-linecap','round');
        p.setAttribute('vector-effect','non-scaling-stroke');
        svg.appendChild(p);
      }
      function clear(svg){ while(svg.firstChild) svg.removeChild(svg.firstChild); }

      // Compute risk & draw diagram
      function redraw(){
        // KPIs
        const events = Number($('#in-events').value);
        const share  = Number($('#in-share').value)/100;
        const enabledCloud = ['t-analytics','t-llmapi','t-enrich','t-lake','t-mon'].filter(id=>$('#'+id).checked).length;
        const allowPII = $('#t-allow').checked; const masked = $('#t-mask').checked;
        const rowsLeaving = Math.round(events * share);
        $('#k-events').textContent = events.toLocaleString();
        $('#k-share').textContent  = Math.round(share*100)+'%';
        $('#k-vendors').textContent = enabledCloud;
        $('#k-leaving').textContent = rowsLeaving.toLocaleString()+ ' rows';
        $('#k-pii').textContent = allowPII ? 'Yes' : (masked ? 'Masked' : 'Metadata only');
        // naive risk index: vendors*7 + rows factor + pii
        const risk = Math.min(99, Math.round(enabledCloud*7 + (rowsLeaving/10000) + (allowPII?25:(masked?10:2))));
        $('#k-risk').textContent = risk;

        // Diagram wires
        const stage = $('#stage');
        const svg = $('#wires');
        svg.setAttribute('viewBox', `0 0 ${stage.clientWidth} ${stage.clientHeight}`);
        svg.setAttribute('width', stage.clientWidth);
        svg.setAttribute('height', stage.clientHeight);
        clear(svg);

        const company = $('#company');
        const leftIds  = ['#vx-core','#vx-llm','#vx-store'];
        const rightMap = [
          ['#c-analytics','#t-analytics'],
          ['#c-llmapi','#t-llmapi'],
          ['#c-enrich','#t-enrich'],
          ['#c-lake','#t-lake'],
          ['#c-mon','#t-mon']
        ];

        const green = getComputedStyle(document.documentElement).getPropertyValue('--vx-good').trim();
        const red   = getComputedStyle(document.documentElement).getPropertyValue('--vx-danger').trim();
        const amber = getComputedStyle(document.documentElement).getPropertyValue('--vx-amber').trim();

        // Left → Company (always local, thin green)
        leftIds.forEach(sel=>{
          const a = anchor($(sel), stage, 'right');
          const b = anchor(company, stage, (window.innerWidth<900?'top':'left'));
          drawWire(svg, a, b, green, 3);
        });

        // Company → Cloud nodes (conditional)
        rightMap.forEach(([nodeSel, toggleSel])=>{
          if(!$(toggleSel).checked) return;
          const a = anchor(company, stage, (window.innerWidth<900?'bottom':'right'));
          const b = anchor($(nodeSel), stage, (window.innerWidth<900?'top':'left'));
          let color = green, width = 3;
          if(allowPII){ color = red; width = 5; }
          else if(masked){ color = amber; width = 4; }
          drawWire(svg, a, b, color, width);
        });
      }

      // Bind controls
      $$('#in-events,#in-share,#t-analytics,#t-llmapi,#t-enrich,#t-lake,#t-mon,#t-mask,#t-allow'.split(',').join(',#'))
        .forEach(el=>el.addEventListener('input', redraw));
      window.addEventListener('resize', ()=>{ requestAnimationFrame(redraw); });

      // init
      redraw();
    </script>
  </body>
</html>
